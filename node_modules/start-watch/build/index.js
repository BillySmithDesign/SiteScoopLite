'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (callback) {
    return function (input) {
        return function watch(log) {
            var chokidar = require('chokidar');

            return new _promise2.default(function (resolve, reject) {
                function init() {
                    chokidar.watch(input, { persistent: true }).on('change', callback).on('error', reject).on('ready', function () {
                        log('press ctrl-c to exit');
                    });
                }

                callback(input).then(init).catch(init);
            });
        };
    };
};

module.exports = exports['default'];